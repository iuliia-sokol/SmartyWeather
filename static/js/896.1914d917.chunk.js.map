{"version":3,"file":"static/js/896.1914d917.chunk.js","mappings":"qSAAaA,EAAiB,CAC5BC,MAAO,QACPC,SAAU,YACVC,SAAU,OACVC,QAAS,EACTC,SAAU,OACVC,aAAc,Q,sCCHHC,EAAe,mCAAG,WAAMC,GAAN,gGAETC,EAAAA,EAAAA,IAAA,UACbC,EAAAA,GADa,iBACiBF,EADjB,eAFS,cAErBG,EAFqB,yBAKpBA,EAAIC,KAAKC,SALW,gCAO3BC,QAAQC,IAAR,iDAP2B,yDAAH,sD,mBCDfC,EAAOC,EAAAA,GAAAA,KAAH,ktBAgBA,SAAAC,GAAC,OAAIA,EAAEC,MAAMC,MAAMC,IAAlB,IACD,SAAAH,GAAC,OAAIA,EAAEC,MAAMG,YAAY,EAAxB,IAED,SAAAJ,GAAC,OAAIA,EAAEC,MAAMI,YAAYF,IAAxB,IAWLG,EAAqBP,EAAAA,GAAAA,IAAH,8FAMlBQ,EAAYR,EAAAA,GAAAA,IAAH,yCAITS,EAAQT,EAAAA,GAAAA,MAAH,kEAKLU,EAAaV,EAAAA,GAAAA,KAAH,8JASVW,EAAQX,EAAAA,GAAAA,MAAH,kTAgBLY,EAAWZ,EAAAA,GAAAA,GAAH,4IAORa,EAASb,EAAAA,GAAAA,GAAH,sGAONc,EAAyBd,EAAAA,GAAAA,KAAH,yOAatBe,EAAWf,EAAAA,GAAAA,KAAH,sB,SCjERgB,EAAa,SAAC,GAMpB,IALLC,EAKI,EALJA,WACAC,EAII,EAJJA,UACAC,EAGI,EAHJA,YACAC,EAEI,EAFJA,eACAC,EACI,EADJA,aAEA,GAAwBC,EAAAA,EAAAA,UAAS,IAAjC,eAAOC,EAAP,KAAaC,EAAb,KACA,GAA8BF,EAAAA,EAAAA,UAAS,IAAvC,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAAwCJ,EAAAA,EAAAA,UAAS,IAAjD,eAAOK,EAAP,KAAqBC,EAArB,KACA,GAAsBN,EAAAA,EAAAA,UAAS,IAA/B,eAAOO,EAAP,KAAYC,EAAZ,KACA,GAAwBR,EAAAA,EAAAA,UAAS,IAAjC,eAAOS,EAAP,KAAaC,EAAb,KACA,GAAgCV,EAAAA,EAAAA,UAAS,IAAzC,eAAOW,EAAP,KAAiBC,EAAjB,KACA,GAAoDZ,EAAAA,EAAAA,UAAS,IAA7D,gBAAOa,GAAP,MAA2BC,GAA3B,MACA,IAA8Cd,EAAAA,EAAAA,UAAS,IAAvD,iBAAOe,GAAP,MAAwBC,GAAxB,MAEMC,IAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,WACHlB,GACHL,GAEH,GAAE,CAACK,EAAML,IAEV,IAsBMwB,GAAgB,mCAAG,WAAMC,GAAN,0EACvBnB,EAAQmB,EAAEC,OAAOC,OACjBzB,GAAe,GAEVG,EAJkB,iEAMLjC,EAAgBiC,GANX,OAMjB7B,EANiB,QAQtByC,GAAmBW,SAASH,EAAEC,OAAOC,QACpCnD,GACA0C,GACE1C,EACGqD,QAAO,SAAAC,GAAK,MAA2B,SAAvBA,EAAMC,YAAV,IACZC,KAAI,SAAAF,GACH,OAAIA,EAAMG,OACD,CACL5B,KAAMyB,EAAMI,KACZC,YAAaL,EAAMvB,QACnB6B,OAAQN,EAAMG,OACdI,YAAaP,EAAMQ,aAAaC,cAChCC,SAAUV,EAAMU,SAChBC,UAAWX,EAAMW,UACjB1B,SAAUe,EAAMf,UAGb,CACLV,KAAMyB,EAAMI,KACZC,YAAaL,EAAMvB,QACnB6B,OAAQ,GACRC,YAAaP,EAAMQ,aAAaC,cAChCC,SAAUV,EAAMU,SAChBC,UAAWX,EAAMW,UACjB1B,SAAUe,EAAMf,SAEnB,KAEHvC,GAAOA,EAAIkE,OACbtB,GAAmB5C,EAAIkE,OArCF,2CAAH,sDAyChBC,GAAY,WAChBrC,EAAQ,IACRY,GAAsB,IACtBE,GAAmB,IACnBpB,GACD,EAED,OACE,SAACnB,EAAD,CAAM+D,SAvEa,SAAAC,GACnBA,EAAMC,iBACDrC,GACHsC,IAAAA,OAAAA,KAAqB,yBAA0BlF,GAE7C4C,IACFY,IAAS2B,EAAAA,EAAAA,IAAYrC,IACrBU,IAAS4B,EAAAA,EAAAA,GAAapC,IACtBQ,IAAS6B,EAAAA,EAAAA,IAAmB7C,IAC5BgB,IAAS8B,EAAAA,EAAAA,IAAsB5C,IAC/Bc,IAAS+B,EAAAA,EAAAA,IAA6B,CAAEzC,IAAAA,EAAKE,KAAAA,KAC7CQ,IAASgC,EAAAA,EAAAA,IAAkC,CAAE1C,IAAAA,EAAKE,KAAAA,KAClDQ,IAASiC,EAAAA,EAAAA,IAAmC,CAAE3C,IAAAA,EAAKE,KAAAA,KACnDQ,IAASkC,EAAAA,EAAAA,IAAoB,CAAE5C,IAAAA,EAAKE,KAAAA,EAAME,SAAAA,KAC1CM,IAASmC,EAAAA,EAAAA,IAAgB,CAAE7C,IAAAA,EAAKE,KAAAA,EAAME,SAAAA,KACtCZ,GAAa,GACbkB,IAASoC,EAAAA,EAAAA,IAAiBpD,KAG5BsC,IACD,EAmDC,UACE,SAACtD,EAAD,WACE,UAACC,EAAD,YACE,SAACC,EAAD,UACG4B,KAAmB,SAAC3B,EAAD,UAAa2B,QAEnC,SAAC1B,EAAD,CACEiE,KAAK,OACLC,GAAG,OACHzB,KAAK,OACL0B,SAAUpC,GACVG,MAAOtB,EACPwD,UAAQ,EACRC,aAAa,MACbC,YAAY,iCAEd,SAACrE,EAAD,CACEsE,MAAO,CAAEC,QAAShE,EAAc,OAAS,SACzCiE,IAAKnE,EAFP,SAIGkB,GAAmBe,KAAI,SAACmC,EAAMC,GAAP,OACtB,UAACzE,EAAD,CAEE0E,QAAS,WACPrE,EAAUmE,EAAK9D,MACfC,EAAQ6D,EAAK9D,MACbO,EAAOuD,EAAK3B,UACZ1B,EAAQqD,EAAK1B,WACbzB,EAAYmD,EAAKpD,UACjBP,EAAW2D,EAAKhC,aAChBzB,GAAgB,EACjB,EAVH,WAYE,gBACE4D,IAAG,UAAKC,EAAAA,IAAL,OAAiBJ,EAAK9B,YAAtB,QACHvE,MAAM,KACN0G,IAAI,UAGN,UAAC3E,EAAD,WACGsE,EAAK9D,KADR,KACgB8D,EAAK/B,OADrB,KAC+B+B,EAAKhC,iBAlB/B,GAAKgC,EAAOC,EAFG,OAyB1B,SAACxE,EAAD,yEAGA,SAAC6E,EAAA,EAAD,CAAUf,KAAK,SAASgB,KAAK,SAASC,MAAM,gBAKrD,E,SCvKOC,EAAcC,EAAQ,MAAtBD,UAEFE,EAAa,WACjB,IAAMzD,GAAWC,EAAAA,EAAAA,MAEXjB,GAAO0E,EAAAA,EAAAA,IAAYC,EAAAA,IACnBC,GAAUF,EAAAA,EAAAA,IAAYG,EAAAA,IACtBC,GAAeJ,EAAAA,EAAAA,IAAYK,EAAAA,IAC3BC,GAASN,EAAAA,EAAAA,IAAYO,EAAAA,IACrBvF,GAAawF,EAAAA,EAAAA,UACnB,GAAsCnF,EAAAA,EAAAA,WAAS,GAA/C,eAAOH,EAAP,KAAoBC,EAApB,KACA,GAAkCE,EAAAA,EAAAA,WAAS,GAA3C,eAAOoF,EAAP,KAAkBrF,EAAlB,MAEAoB,EAAAA,EAAAA,YAAU,WACJlB,GAA0B,IAAlBgF,EAAOI,QACjBpE,GAASqE,EAAAA,EAAAA,MAEZ,GAAE,CAACrF,EAAMgB,EAAUgE,EAAOI,SAE3B,IAKMzF,EAAY,WAChBE,GAAe,EAChB,EAID,OACE,kBACE8D,MAAO,CACL2B,UAAW,QAEbtB,QAhBoB,SAAAxB,GAClBA,EAAM+C,gBAAkB7F,GAC1BC,GAEH,EAQC,WAME,SAAC6F,EAAA,EAAD,CACEC,SAAUN,EAAYO,EAAAA,GAAgBT,EAAAA,GACtCU,KAAK,YAEP,UAACpB,EAAD,YACE,SAAC9E,EAAD,CACEC,WAAYA,EACZE,YAAaA,EACbC,eAAgBA,EAChBF,UAAWA,EACXwF,UAAWA,EACXrF,aAAcA,IAEfqF,GAAaP,GAAWE,IACvB,iCACE,SAACV,EAAA,EAAD,CAAUC,KAAK,2BACf,SAACuB,EAAA,EAAD,YAMX,EAED,EAAeC,EAAAA,KAAWpB,E","sources":["utils/notifySettings.jsx","services/citySearchAPI.js","components/SearchForm/SearchForm.styled.js","components/SearchForm/SearchForm.jsx","pages/SearchPage/SearchPage.jsx"],"sourcesContent":["export const notifySettings = {\n  width: '380px',\n  position: 'right-top',\n  distance: '10px',\n  opacity: 1,\n  fontSize: '20px',\n  borderRadius: '12px',\n};\n","import axios from 'axios';\nimport { OPEN_METEO_SEARCH_URL } from 'utils/consts/consts';\n\nexport const fetchCityByName = async query => {\n  try {\n    const res = await axios.get(\n      `${OPEN_METEO_SEARCH_URL}?name=${query}&count=100`\n    );\n    return res.data.results;\n  } catch (err) {\n    console.log(`${err}: 'Unable to retrieve places'`);\n  }\n};\n","import styled from 'styled-components';\n\nexport const Form = styled.form`\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  height: fit-content;\n  padding: 32px 16px;\n  background: rgba(255, 255, 255, 0.33);\n  border-radius: 30px;\n  margin: 0 auto;\n  margin-bottom: 56px;\n  gap: 32px;\n  box-shadow: inset -5px -5px 9px rgba(255, 255, 255, 0.45),\n    inset 5px 5px 9px rgba(94, 104, 121, 0.3);\n  backdrop-filter: blur(5.3px);\n  -webkit-backdrop-filter: blur(5.3px);\n  border: 1px solid rgba(255, 255, 255, 0.77);\n  font-family: ${p => p.theme.fonts.main};\n  font-weight: ${p => p.theme.fontWeights[0]};\n  font-size: 20px;\n  line-height: ${p => p.theme.lineHeights.main};\n\n  @media screen and (min-width: 768px) {\n    padding: 32px 56px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    width: 70%;\n  }\n`;\n\nexport const PlacesAutocomplete = styled.div`\n  align-items: center;\n  display: flex;\n  justify-content: center;\n`;\n\nexport const InputWrap = styled.div`\n  padding: 8px;\n`;\n\nexport const Label = styled.label`\n  display: block;\n  margin-bottom: 8px;\n`;\n\nexport const InputError = styled.span`\n  background: #ff00002e;\n  border-radius: 20px;\n  display: inline-block;\n  font-size: 14px;\n  margin-left: 4px;\n  padding: 8px;\n`;\n\nexport const Input = styled.input`\n  border-radius: 16px;\n  border: none;\n  box-sizing: border-box;\n  display: block;\n  height: 42px;\n  padding: 12px 16px;\n  width: 100%;\n  background-color: rgba(255, 255, 255, 0.63);\n  font-size: 16px;\n\n  @media screen and (min-width: 768px) {\n    font-size: 20px;\n  }\n`;\n\nexport const DataList = styled.ul`\n  border-radius: 16px;\n  max-height: 20vh;\n  overflow-y: scroll;\n  background-color: rgba(255, 255, 255, 0.63);\n`;\n\nexport const Option = styled.li`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 8px 16px;\n`;\n\nexport const PlacesAutocompleteHint = styled.span`\n  display: inline-block;\n  font-size: 12px;\n  margin-top: 8px;\n  margin-bottom: 8px;\n\n  @media screen and (min-width: 768px) {\n    font-size: 16px;\n    margin-top: 12px;\n    margin-bottom: 12px;\n  }\n`;\n\nexport const CityName = styled.span``;\n","import { ButtonUI } from 'components/Button/Button';\nimport { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Notiflix from 'notiflix';\nimport { notifySettings } from 'utils/notifySettings';\nimport {\n  fetchAirQuality,\n  fetchAstroDataFromWeatherApi,\n  fetchCurrentWeather,\n  fetchCurrentWeatherFromWeatherApi,\n  fetchPexelsImage,\n  fetchWeatherForecastFromWeatherApi,\n} from 'redux/location/locOperations';\nimport {\n  setLatitude,\n  setLongitude,\n  setCityBySelection,\n  setCountryBySelection,\n} from 'redux/location/locSlice';\nimport { fetchCityByName } from 'services/citySearchAPI';\nimport { FLAGS_URL } from 'utils/consts/consts';\nimport {\n  CityName,\n  DataList,\n  Form,\n  Input,\n  InputError,\n  InputWrap,\n  Label,\n  Option,\n  PlacesAutocomplete,\n  PlacesAutocompleteHint,\n} from './SearchForm.styled';\n\nexport const SearchForm = ({\n  elementRef,\n  hideSuggs,\n  isHideSuggs,\n  setIsHideSuggs,\n  setSelection,\n}) => {\n  const [city, setCity] = useState('');\n  const [country, setCountry] = useState('');\n  const [selectedCity, setSelectedCity] = useState('');\n  const [lat, setLat] = useState('');\n  const [long, setLong] = useState('');\n  const [timezone, setTimezone] = useState('');\n  const [autocompleteCities, setAutocompleteCities] = useState([]);\n  const [autocompleteErr, setAutocompleteErr] = useState('');\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!city) {\n      hideSuggs();\n    }\n  }, [city, hideSuggs]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    if (!selectedCity) {\n      Notiflix.Notify.info('You should select city', notifySettings);\n    }\n    if (selectedCity) {\n      dispatch(setLatitude(lat));\n      dispatch(setLongitude(long));\n      dispatch(setCityBySelection(city));\n      dispatch(setCountryBySelection(country));\n      dispatch(fetchAstroDataFromWeatherApi({ lat, long }));\n      dispatch(fetchCurrentWeatherFromWeatherApi({ lat, long }));\n      dispatch(fetchWeatherForecastFromWeatherApi({ lat, long }));\n      dispatch(fetchCurrentWeather({ lat, long, timezone }));\n      dispatch(fetchAirQuality({ lat, long, timezone }));\n      setSelection(true);\n      dispatch(fetchPexelsImage(city));\n    }\n\n    resetForm();\n  };\n\n  const handleCityChange = async e => {\n    setCity(e.target.value);\n    setIsHideSuggs(false);\n\n    if (!city) return;\n\n    const res = await fetchCityByName(city);\n\n    !autocompleteCities.includes(e.target.value) &&\n      res &&\n      setAutocompleteCities(\n        res\n          .filter(place => place.feature_code !== 'AIRP')\n          .map(place => {\n            if (place.admin1) {\n              return {\n                city: place.name,\n                countryName: place.country,\n                region: place.admin1,\n                countryCode: place.country_code.toLowerCase(),\n                latitude: place.latitude,\n                longitude: place.longitude,\n                timezone: place.timezone,\n              };\n            }\n            return {\n              city: place.name,\n              countryName: place.country,\n              region: '',\n              countryCode: place.country_code.toLowerCase(),\n              latitude: place.latitude,\n              longitude: place.longitude,\n              timezone: place.timezone,\n            };\n          })\n      );\n    if (res && res.error) {\n      setAutocompleteErr(res.error);\n    }\n  };\n\n  const resetForm = () => {\n    setCity('');\n    setAutocompleteCities([]);\n    setAutocompleteErr('');\n    hideSuggs();\n  };\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <PlacesAutocomplete>\n        <InputWrap>\n          <Label>\n            {autocompleteErr && <InputError>{autocompleteErr}</InputError>}\n          </Label>\n          <Input\n            type=\"text\"\n            id=\"city\"\n            name=\"city\"\n            onChange={handleCityChange}\n            value={city}\n            required\n            autoComplete=\"off\"\n            placeholder=\"Start typing your city name\"\n          />\n          <DataList\n            style={{ display: isHideSuggs ? 'none' : 'block' }}\n            ref={elementRef}\n          >\n            {autocompleteCities.map((item, idx) => (\n              <Option\n                key={'' + item + idx}\n                onClick={() => {\n                  hideSuggs(item.city);\n                  setCity(item.city);\n                  setLat(item.latitude);\n                  setLong(item.longitude);\n                  setTimezone(item.timezone);\n                  setCountry(item.countryName);\n                  setSelectedCity(true);\n                }}\n              >\n                <img\n                  src={`${FLAGS_URL}${item.countryCode}.svg`}\n                  width=\"30\"\n                  alt=\"flag\"\n                />\n\n                <CityName>\n                  {item.city}, {item.region}, {item.countryName}\n                </CityName>\n              </Option>\n            ))}\n          </DataList>\n          <PlacesAutocompleteHint>\n            *start typing and choose your city from the given options\n          </PlacesAutocompleteHint>\n          <ButtonUI type=\"submit\" text=\"Submit\" color=\"white\" />\n        </InputWrap>\n      </PlacesAutocomplete>\n    </Form>\n  );\n};\n","import { ButtonUI } from 'components/Button/Button';\nimport { CardUI } from 'components/Card/Card';\nimport { MainBoxUI } from 'components/MainBox/MainBox';\nimport { SearchForm } from 'components/SearchForm/SearchForm';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchGeoImage } from 'redux/location/locOperations';\nimport {\n  getAdditionalCurrentWeather,\n  getCityImages,\n  getCityName,\n  getGeoImages,\n  getCurrentWeather,\n} from 'redux/location/locSelectors';\n\nconst { Container } = require('components/Container/Container');\n\nconst SearchPage = () => {\n  const dispatch = useDispatch();\n\n  const city = useSelector(getCityName);\n  const weather = useSelector(getCurrentWeather);\n  const extraWeather = useSelector(getAdditionalCurrentWeather);\n  const images = useSelector(getGeoImages);\n  const elementRef = useRef();\n  const [isHideSuggs, setIsHideSuggs] = useState(false);\n  const [selection, setSelection] = useState(false);\n\n  useEffect(() => {\n    if (city && images.length === 0) {\n      dispatch(fetchGeoImage());\n    }\n  }, [city, dispatch, images.length]);\n\n  const onBackdropClick = event => {\n    if (event.currentTarget !== elementRef) {\n      hideSuggs();\n    }\n  };\n  const hideSuggs = () => {\n    setIsHideSuggs(true);\n  };\n\n  // console.log(selection, weather, extraWeather);\n\n  return (\n    <main\n      style={{\n        minHeight: '70vh',\n      }}\n      onClick={onBackdropClick}\n    >\n      <CardUI\n        selector={selection ? getCityImages : getGeoImages}\n        page=\"search\"\n      />\n      <Container>\n        <SearchForm\n          elementRef={elementRef}\n          isHideSuggs={isHideSuggs}\n          setIsHideSuggs={setIsHideSuggs}\n          hideSuggs={hideSuggs}\n          selection={selection}\n          setSelection={setSelection}\n        />\n        {selection && weather && extraWeather && (\n          <>\n            <ButtonUI text=\"Search other location\" />\n            <MainBoxUI />\n          </>\n        )}\n      </Container>\n    </main>\n  );\n};\n\nexport default React.memo(SearchPage);\n"],"names":["notifySettings","width","position","distance","opacity","fontSize","borderRadius","fetchCityByName","query","axios","OPEN_METEO_SEARCH_URL","res","data","results","console","log","Form","styled","p","theme","fonts","main","fontWeights","lineHeights","PlacesAutocomplete","InputWrap","Label","InputError","Input","DataList","Option","PlacesAutocompleteHint","CityName","SearchForm","elementRef","hideSuggs","isHideSuggs","setIsHideSuggs","setSelection","useState","city","setCity","country","setCountry","selectedCity","setSelectedCity","lat","setLat","long","setLong","timezone","setTimezone","autocompleteCities","setAutocompleteCities","autocompleteErr","setAutocompleteErr","dispatch","useDispatch","useEffect","handleCityChange","e","target","value","includes","filter","place","feature_code","map","admin1","name","countryName","region","countryCode","country_code","toLowerCase","latitude","longitude","error","resetForm","onSubmit","event","preventDefault","Notiflix","setLatitude","setLongitude","setCityBySelection","setCountryBySelection","fetchAstroDataFromWeatherApi","fetchCurrentWeatherFromWeatherApi","fetchWeatherForecastFromWeatherApi","fetchCurrentWeather","fetchAirQuality","fetchPexelsImage","type","id","onChange","required","autoComplete","placeholder","style","display","ref","item","idx","onClick","src","FLAGS_URL","alt","Button","text","color","Container","require","SearchPage","useSelector","getCityName","weather","getCurrentWeather","extraWeather","getAdditionalCurrentWeather","images","getGeoImages","useRef","selection","length","fetchGeoImage","minHeight","currentTarget","Card","selector","getCityImages","page","MainBox","React"],"sourceRoot":""}